[gd_scene load_steps=39 format=2]

[ext_resource path="res://Assets/Partials/effect_4.png" type="Texture" id=1]
[ext_resource path="res://Assets/Partials/random_selection.png" type="Texture" id=2]
[ext_resource path="res://Scripts/Skills/Spawn.cs" type="Script" id=3]
[ext_resource path="res://Tilemaps/JungleDirtTileSet.tres" type="TileSet" id=4]
[ext_resource path="res://Scenes/Movement.tscn" type="PackedScene" id=5]
[ext_resource path="res://Sprites/Menu/Pause.png" type="Texture" id=6]
[ext_resource path="res://Scripts/GameMenu.cs" type="Script" id=7]
[ext_resource path="res://Scenes/Bars/HealthBar.tscn" type="PackedScene" id=8]
[ext_resource path="res://Scenes/Bars/ManapointBar.tscn" type="PackedScene" id=9]
[ext_resource path="res://Scenes/CoinsContainer.tscn" type="PackedScene" id=10]
[ext_resource path="res://Scripts/Tower.cs" type="Script" id=11]
[ext_resource path="res://Assets/Fonts/ZenDots-Regular.ttf" type="DynamicFontData" id=12]
[ext_resource path="res://Sprites/Background/2.jpg" type="Texture" id=13]
[ext_resource path="res://Scenes/ScoresContainer.tscn" type="PackedScene" id=14]
[ext_resource path="res://Scripts/Game.cs" type="Script" id=15]
[ext_resource path="res://Scenes/CastContainer.tscn" type="PackedScene" id=16]
[ext_resource path="res://Scenes/Menu/PauseMenu.cs" type="Script" id=17]

[sub_resource type="RectangleShape2D" id=8]
extents = Vector2( 12.4638, 26.4617 )

[sub_resource type="RectangleShape2D" id=9]
extents = Vector2( 8.90021, 21.5617 )

[sub_resource type="CanvasItemMaterial" id=10]
blend_mode = 1

[sub_resource type="Curve" id=2]
_data = [ Vector2( 0.0955882, 1 ), -0.772728, 0.0, 0, 0, Vector2( 0.966912, 0 ), 0.0, 0.346182, 0, 0 ]

[sub_resource type="CurveTexture" id=3]
width = 2148
curve = SubResource( 2 )

[sub_resource type="ParticlesMaterial" id=11]
flag_disable_z = true
spread = 43.75
gravity = Vector3( 0, 0, 0 )
angular_velocity = 100.0
orbit_velocity = -402.78
orbit_velocity_random = 0.44
linear_accel_random = 0.79
angle = 360.0
angle_random = 1.0
scale_curve = SubResource( 3 )
color = Color( 0.317647, 0.470588, 0.4, 0.733333 )

[sub_resource type="CanvasItemMaterial" id=12]
blend_mode = 1

[sub_resource type="ParticlesMaterial" id=13]
flag_disable_z = true
spread = 43.75
gravity = Vector3( 0, 0, 0 )
angular_velocity = 100.0
orbit_velocity = -402.78
orbit_velocity_random = 0.44
linear_accel_random = 0.79
angle = 360.0
angle_random = 1.0
scale_curve = SubResource( 3 )
color = Color( 0.501961, 0.741176, 0.423529, 0.733333 )

[sub_resource type="StyleBoxFlat" id=14]
bg_color = Color( 0.290196, 0.945098, 0.462745, 1 )
border_color = Color( 0, 0, 0, 1 )
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25
shadow_offset = Vector2( 25, 25 )

[sub_resource type="DynamicFont" id=15]
size = 15
extra_spacing_char = 2
font_data = ExtResource( 12 )

[sub_resource type="StyleBoxFlat" id=16]
bg_color = Color( 0.0666667, 0.45098, 0.831373, 1 )
border_color = Color( 0, 0, 0, 1 )
corner_radius_top_left = 25
corner_radius_top_right = 25
corner_radius_bottom_right = 25
corner_radius_bottom_left = 25
shadow_offset = Vector2( 25, 25 )

[sub_resource type="ParticlesMaterial" id=7]
flag_disable_z = true
spread = 43.75
gravity = Vector3( 0, 0, 0 )
angular_velocity = 100.0
orbit_velocity = -402.78
orbit_velocity_random = 0.44
linear_accel_random = 0.79
angle = 360.0
angle_random = 1.0
scale_curve = SubResource( 3 )
color = Color( 0.662745, 0.345098, 1, 0.733333 )

[sub_resource type="DynamicFont" id=25]
size = 22
font_data = ExtResource( 12 )

[sub_resource type="DynamicFont" id=17]
size = 32
font_data = ExtResource( 12 )

[sub_resource type="DynamicFont" id=18]
font_data = ExtResource( 12 )

[sub_resource type="StyleBoxFlat" id=19]
bg_color = Color( 0.215686, 0.54902, 0.188235, 1 )

[sub_resource type="DynamicFont" id=20]
font_data = ExtResource( 12 )

[sub_resource type="StyleBoxFlat" id=21]
bg_color = Color( 0.294118, 0.498039, 0.87451, 1 )

[sub_resource type="DynamicFont" id=22]
font_data = ExtResource( 12 )

[sub_resource type="StyleBoxFlat" id=23]
bg_color = Color( 0.603922, 0.227451, 0.227451, 1 )

[sub_resource type="DynamicFont" id=24]
font_data = ExtResource( 12 )

[node name="Core" type="Node"]
script = ExtResource( 7 )

[node name="Game" type="Node2D" parent="."]
position = Vector2( 449.013, 1013.88 )
script = ExtResource( 15 )

[node name="TileMap" type="TileMap" parent="Game"]
tile_set = ExtResource( 4 )
cell_size = Vector2( 32, 32 )
format = 1
tile_data = PoolIntArray( 131056, 4, 0, 131057, 4, 0, 131058, 3, 0, 131059, 4, 0, 131060, 4, 0, 131061, 4, 0, 131062, 4, 0, 131063, 4, 0, 131064, 4, 0, 131065, 4, 0, 131066, 4, 0, 131067, 4, 0, 131068, 4, 0, 131069, 4, 0, 131070, 4, 0, 131071, 4, 0, 65536, 4, 0, 65537, 4, 0, 65538, 4, 0, 65539, 4, 0, 65540, 4, 0, 65541, 4, 0, 65542, 4, 0, 65543, 4, 0, 65544, 4, 0, 65545, 4, 0, 65546, 4, 0, 65547, 4, 0, 65548, 4, 0, 65549, 4, 0, 65550, 4, 0, 65551, 4, 0, 65552, 4, 0, 65553, 4, 0, 65554, 4, 0, 65555, 4, 0, 65556, 4, 0, 65557, 4, 0, 65558, 4, 0, 65559, 4, 0, 65560, 4, 0, 65561, 4, 0, 65562, 4, 0, 65563, 4, 0, 65564, 4, 0, 65565, 4, 0, 65566, 4, 0, 65567, 4, 0, 65568, 4, 0, 65569, 4, 0, 65570, 4, 0, 65571, 4, 0, 65572, 4, 0, 65573, 4, 0, 65574, 4, 0, 65575, 4, 0, 65576, 4, 0, 65577, 4, 0, 65578, 4, 0, 65579, 4, 0, 65580, 4, 0, 65581, 5, 0, 65582, 4, 0, 65583, 4, 0 )

[node name="Tower" type="Node2D" parent="Game"]
position = Vector2( -433.039, -150 )

[node name="StaticBody2D" type="StaticBody2D" parent="Game/Tower" groups=[
"Tower",
]]
scale = Vector2( 1, 6.84 )
script = ExtResource( 11 )

[node name="Area2D" type="Area2D" parent="Game/Tower/StaticBody2D"]
collision_mask = 31

[node name="CollisionShape2D" type="CollisionShape2D" parent="Game/Tower/StaticBody2D/Area2D"]
shape = SubResource( 8 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Game/Tower/StaticBody2D"]
shape = SubResource( 9 )

[node name="Particles2D" type="Particles2D" parent="Game/Tower"]
visible = false
material = SubResource( 10 )
position = Vector2( 14.563, -10.7955 )
scale = Vector2( 0.1, 0.3 )
amount = 1555
lifetime = 176.8
fixed_fps = 30
visibility_rect = Rect2( -25, -25, 50, 50 )
process_material = SubResource( 11 )
texture = ExtResource( 2 )

[node name="Particles2D2" type="Particles2D" parent="Game/Tower"]
material = SubResource( 12 )
scale = Vector2( 0.8, 2 )
amount = 15
visibility_rect = Rect2( -25, -25, 50, 50 )
process_material = SubResource( 13 )
texture = ExtResource( 1 )

[node name="Movement" parent="Game" instance=ExtResource( 5 )]
position = Vector2( 146.254, -12.755 )
collision_mask = 9

[node name="UI" type="Control" parent="Game"]
margin_left = -446.13
margin_top = -999.995
margin_right = -406.13
margin_bottom = -959.995
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBoxContainer" type="VBoxContainer" parent="Game/UI"]
anchor_right = 10.225
anchor_bottom = 2.1
margin_right = -369.0
margin_bottom = -44.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HealthBar" parent="Game/UI/VBoxContainer" instance=ExtResource( 8 )]
anchor_right = 0.0
anchor_bottom = 0.0
margin_right = 409.0
margin_bottom = 40.0

[node name="UpghradeHP" type="Button" parent="Game/UI/VBoxContainer/HealthBar"]
anchor_left = 1.029
anchor_top = 0.225
anchor_right = 1.447
anchor_bottom = 0.8
margin_left = 0.138977
margin_right = 0.177002
custom_styles/normal = SubResource( 14 )
custom_fonts/font = SubResource( 15 )
text = "Upghrade HP"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ManapointBar" parent="Game/UI/VBoxContainer" instance=ExtResource( 9 )]
margin_left = 0.0
margin_top = 44.0
margin_right = 409.0
margin_bottom = 84.0

[node name="UpghradeMP" type="Button" parent="Game/UI/VBoxContainer/ManapointBar"]
anchor_left = 1.029
anchor_top = 0.225
anchor_right = 1.447
anchor_bottom = 0.8
margin_left = 0.138977
margin_right = 0.177002
custom_styles/normal = SubResource( 16 )
custom_fonts/font = SubResource( 15 )
text = "Upghrade MP"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="CoinsContainer" parent="Game/UI" instance=ExtResource( 10 )]
margin_left = 1411.69
margin_top = 29.8467
margin_right = 1766.17
margin_bottom = 77.9667

[node name="ScoresContainer" parent="Game/UI" instance=ExtResource( 14 )]
margin_left = 762.488
margin_top = 246.02
margin_right = 1122.48
margin_bottom = 312.02

[node name="CastContainer" parent="Game/UI" instance=ExtResource( 16 )]
margin_left = 767.095
margin_top = 347.669
margin_right = 807.095
margin_bottom = 387.669

[node name="PauseContainer" type="VBoxContainer" parent="Game/UI"]
anchor_left = 44.575
anchor_right = 46.985
anchor_bottom = 2.775
margin_top = 15.0
margin_right = 0.599976
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Pause" type="TextureButton" parent="Game/UI/PauseContainer"]
margin_right = 97.0
margin_bottom = 96.0
texture_normal = ExtResource( 6 )

[node name="Background" type="Control" parent="Game"]
margin_right = 40.0
margin_bottom = 40.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ParallaxBackground" type="ParallaxBackground" parent="Game/Background"]

[node name="ParallaxLayer" type="ParallaxLayer" parent="Game/Background/ParallaxBackground"]
visible = false
motion_scale = Vector2( 0.1, 0.1 )

[node name="Sky" type="Sprite" parent="Game/Background/ParallaxBackground/ParallaxLayer"]
visible = false
position = Vector2( -62.5222, -26.1959 )
scale = Vector2( 1.47738, 1.4437 )
texture = ExtResource( 13 )
centered = false

[node name="Spawner" type="Node2D" parent="Game"]
position = Vector2( 1398.3, -139 )
scale = Vector2( 8, 20 )
script = ExtResource( 3 )

[node name="Particles2D" type="Particles2D" parent="Game/Spawner"]
material = SubResource( 12 )
scale = Vector2( 0.1, 0.1 )
amount = 15
visibility_rect = Rect2( -25, -25, 50, 50 )
process_material = SubResource( 7 )
texture = ExtResource( 1 )

[node name="PauseMenu" type="Control" parent="."]
visible = false
margin_left = 837.978
margin_top = 531.838
margin_right = 877.978
margin_bottom = 571.838
script = ExtResource( 17 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBoxContainer" type="VBoxContainer" parent="PauseMenu"]
margin_right = 260.0
margin_bottom = 60.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Resume" type="Button" parent="PauseMenu/VBoxContainer"]
pause_mode = 2
process_priority = 13
margin_right = 260.0
margin_bottom = 60.0
size_flags_vertical = 3
custom_fonts/font = SubResource( 25 )
action_mode = 0
text = "Resume"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="GameOverMenu" type="Control" parent="."]
visible = false
margin_left = 659.589
margin_top = 373.268
margin_right = 699.589
margin_bottom = 413.268
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HGameOverContainer" type="HBoxContainer" parent="GameOverMenu"]
anchor_left = -7.779
anchor_top = 0.079
anchor_right = 22.221
anchor_bottom = 6.329
margin_left = -0.00698853
margin_top = 0.01841
margin_right = -0.00701904
margin_bottom = 0.0179749
alignment = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VGameOverContainer" type="VBoxContainer" parent="GameOverMenu/HGameOverContainer"]
margin_left = 488.0
margin_right = 712.0
margin_bottom = 249.0
custom_constants/separation = 25
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VLabelsContainer" type="VBoxContainer" parent="GameOverMenu/HGameOverContainer/VGameOverContainer"]
margin_right = 224.0
margin_bottom = 63.0

[node name="GameOver" type="Label" parent="GameOverMenu/HGameOverContainer/VGameOverContainer/VLabelsContainer"]
margin_right = 224.0
margin_bottom = 39.0
custom_fonts/font = SubResource( 17 )
text = "Game Over"
align = 1
valign = 1

[node name="Scores" type="Label" parent="GameOverMenu/HGameOverContainer/VGameOverContainer/VLabelsContainer"]
margin_top = 43.0
margin_right = 224.0
margin_bottom = 63.0
custom_fonts/font = SubResource( 18 )
text = "Your scores: 250"
align = 1
valign = 1

[node name="VButtonsContainer" type="VBoxContainer" parent="GameOverMenu/HGameOverContainer/VGameOverContainer"]
margin_top = 88.0
margin_right = 224.0
margin_bottom = 159.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_constants/separation = 60

[node name="Restart" type="Button" parent="GameOverMenu/HGameOverContainer/VGameOverContainer/VButtonsContainer"]
margin_right = 224.0
margin_bottom = 71.0
size_flags_vertical = 3
custom_styles/normal = SubResource( 19 )
custom_fonts/font = SubResource( 20 )
text = "Play again"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MainMenu" type="Button" parent="GameOverMenu/HGameOverContainer/VGameOverContainer"]
margin_top = 184.0
margin_right = 224.0
margin_bottom = 204.0
custom_styles/normal = SubResource( 21 )
custom_fonts/font = SubResource( 22 )
text = "Main menu"

[node name="Exit" type="Button" parent="GameOverMenu/HGameOverContainer/VGameOverContainer"]
margin_top = 229.0
margin_right = 224.0
margin_bottom = 249.0
custom_styles/normal = SubResource( 23 )
custom_fonts/font = SubResource( 24 )
custom_colors/font_color = Color( 1, 1, 1, 1 )
text = "Exit"
__meta__ = {
"_edit_use_anchors_": false
}
[connection signal="body_entered" from="Game/Tower/StaticBody2D/Area2D" to="Game/Tower/StaticBody2D" method="OnTowerEntered"]
[connection signal="pressed" from="Game/UI/VBoxContainer/HealthBar/UpghradeHP" to="Game" method="On_HP_Upghrade"]
[connection signal="pressed" from="Game/UI/VBoxContainer/ManapointBar/UpghradeMP" to="Game" method="On_MP_Upghrade"]
[connection signal="pressed" from="Game/UI/PauseContainer/Pause" to="." method="OnPausePressed"]
[connection signal="pressed" from="PauseMenu/VBoxContainer/Resume" to="." method="_on_Resume_pressed"]
[connection signal="pressed" from="GameOverMenu/HGameOverContainer/VGameOverContainer/VButtonsContainer/Restart" to="." method="OnRestartPressed"]
[connection signal="pressed" from="GameOverMenu/HGameOverContainer/VGameOverContainer/MainMenu" to="." method="OnMainMenuPressed"]
[connection signal="pressed" from="GameOverMenu/HGameOverContainer/VGameOverContainer/Exit" to="." method="OnExitPressed"]
